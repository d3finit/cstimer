import {dialog} from "./dialog.js";

$('<style>.pyro>.after,.pyro>.before{position:absolute;width:5px;height:5px;border-radius:50%;box-shadow:0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff,0 0 #fff;-moz-animation:1s bang ease-out infinite backwards,1s gravity ease-in infinite backwards,5s position linear infinite backwards;-webkit-animation:1s bang ease-out infinite backwards,1s gravity ease-in infinite backwards,5s position linear infinite backwards;-o-animation:1s bang ease-out infinite backwards,1s gravity ease-in infinite backwards,5s position linear infinite backwards;-ms-animation:1s bang ease-out infinite backwards,1s gravity ease-in infinite backwards,5s position linear infinite backwards;animation:1s bang ease-out infinite backwards,1s gravity ease-in infinite backwards,5s position linear infinite backwards}.pyro>.after{-moz-animation-delay:1.25s,1.25s,1.25s;-webkit-animation-delay:1.25s,1.25s,1.25s;-o-animation-delay:1.25s,1.25s,1.25s;-ms-animation-delay:1.25s,1.25s,1.25s;animation-delay:1.25s,1.25s,1.25s;-moz-animation-duration:1.25s,1.25s,6.25s;-webkit-animation-duration:1.25s,1.25s,6.25s;-o-animation-duration:1.25s,1.25s,6.25s;-ms-animation-duration:1.25s,1.25s,6.25s;animation-duration:1.25s,1.25s,6.25s}@-webkit-keyframes bang{to{box-shadow:-202px -87.6666666667px #00ff4d,248px 65.3333333333px #0051ff,216px -344.6666666667px #ff0059,-85px 29.3333333333px #1e00ff,-178px -315.6666666667px #3700ff,-116px -25.6666666667px #6f0,149px -112.6666666667px #09ff00,-170px -240.6666666667px #00fff2,-67px -349.6666666667px #f700ff,-115px -30.6666666667px #3700ff,-162px -334.6666666667px #00ff15,-31px 75.3333333333px #a600ff,-120px -279.6666666667px #59ff00,249px -223.6666666667px #ff5100,-5px -227.6666666667px #ff00bf,-183px -71.6666666667px #ff009d,189px -114.6666666667px #0fb,-57px -341.6666666667px #e600ff,3px -88.6666666667px #ff00d0,192px -352.6666666667px #59ff00,34px -360.6666666667px #ff002b,105px -12.6666666667px #d0ff00,-73px -37.6666666667px #bfff00,28px -243.6666666667px #1a00ff,15px -256.6666666667px #ff0080,-55px -97.6666666667px #0f9,25px -406.6666666667px #d0f,-196px 79.3333333333px #00ff5e,-28px -312.6666666667px #2b00ff,-146px 70.3333333333px #0f9,110px -234.6666666667px #f30,161px 40.3333333333px #0f5,14px -.6666666667px #ff002f,-211px -53.6666666667px red,170px 6.3333333333px #0900ff,176px -201.6666666667px #2600ff,84px -331.6666666667px #02f,68px -154.6666666667px #008cff,-133px 62.3333333333px #00ff1e,2px 43.3333333333px #00f2ff,29px 65.3333333333px #0062ff,-229px 9.3333333333px #f60,-202px -390.6666666667px #00ffd9,237px -264.6666666667px #a2ff00,101px -78.6666666667px #8f0,243px -355.6666666667px #07f,166px 50.3333333333px #0fa,185px -354.6666666667px #0fd,-236px -116.6666666667px #ff005e,-12px -77.6666666667px #ff4000,243px -148.6666666667px #ffa600}}@-moz-keyframes bang{to{box-shadow:-202px -87.6666666667px #00ff4d,248px 65.3333333333px #0051ff,216px -344.6666666667px #ff0059,-85px 29.3333333333px #1e00ff,-178px -315.6666666667px #3700ff,-116px -25.6666666667px #6f0,149px -112.6666666667px #09ff00,-170px -240.6666666667px #00fff2,-67px -349.6666666667px #f700ff,-115px -30.6666666667px #3700ff,-162px -334.6666666667px #00ff15,-31px 75.3333333333px #a600ff,-120px -279.6666666667px #59ff00,249px -223.6666666667px #ff5100,-5px -227.6666666667px #ff00bf,-183px -71.6666666667px #ff009d,189px -114.6666666667px #0fb,-57px -341.6666666667px #e600ff,3px -88.6666666667px #ff00d0,192px -352.6666666667px #59ff00,34px -360.6666666667px #ff002b,105px -12.6666666667px #d0ff00,-73px -37.6666666667px #bfff00,28px -243.6666666667px #1a00ff,15px -256.6666666667px #ff0080,-55px -97.6666666667px #0f9,25px -406.6666666667px #d0f,-196px 79.3333333333px #00ff5e,-28px -312.6666666667px #2b00ff,-146px 70.3333333333px #0f9,110px -234.6666666667px #f30,161px 40.3333333333px #0f5,14px -.6666666667px #ff002f,-211px -53.6666666667px red,170px 6.3333333333px #0900ff,176px -201.6666666667px #2600ff,84px -331.6666666667px #02f,68px -154.6666666667px #008cff,-133px 62.3333333333px #00ff1e,2px 43.3333333333px #00f2ff,29px 65.3333333333px #0062ff,-229px 9.3333333333px #f60,-202px -390.6666666667px #00ffd9,237px -264.6666666667px #a2ff00,101px -78.6666666667px #8f0,243px -355.6666666667px #07f,166px 50.3333333333px #0fa,185px -354.6666666667px #0fd,-236px -116.6666666667px #ff005e,-12px -77.6666666667px #ff4000,243px -148.6666666667px #ffa600}}@-o-keyframes bang{to{box-shadow:-202px -87.6666666667px #00ff4d,248px 65.3333333333px #0051ff,216px -344.6666666667px #ff0059,-85px 29.3333333333px #1e00ff,-178px -315.6666666667px #3700ff,-116px -25.6666666667px #6f0,149px -112.6666666667px #09ff00,-170px -240.6666666667px #00fff2,-67px -349.6666666667px #f700ff,-115px -30.6666666667px #3700ff,-162px -334.6666666667px #00ff15,-31px 75.3333333333px #a600ff,-120px -279.6666666667px #59ff00,249px -223.6666666667px #ff5100,-5px -227.6666666667px #ff00bf,-183px -71.6666666667px #ff009d,189px -114.6666666667px #0fb,-57px -341.6666666667px #e600ff,3px -88.6666666667px #ff00d0,192px -352.6666666667px #59ff00,34px -360.6666666667px #ff002b,105px -12.6666666667px #d0ff00,-73px -37.6666666667px #bfff00,28px -243.6666666667px #1a00ff,15px -256.6666666667px #ff0080,-55px -97.6666666667px #0f9,25px -406.6666666667px #d0f,-196px 79.3333333333px #00ff5e,-28px -312.6666666667px #2b00ff,-146px 70.3333333333px #0f9,110px -234.6666666667px #f30,161px 40.3333333333px #0f5,14px -.6666666667px #ff002f,-211px -53.6666666667px red,170px 6.3333333333px #0900ff,176px -201.6666666667px #2600ff,84px -331.6666666667px #02f,68px -154.6666666667px #008cff,-133px 62.3333333333px #00ff1e,2px 43.3333333333px #00f2ff,29px 65.3333333333px #0062ff,-229px 9.3333333333px #f60,-202px -390.6666666667px #00ffd9,237px -264.6666666667px #a2ff00,101px -78.6666666667px #8f0,243px -355.6666666667px #07f,166px 50.3333333333px #0fa,185px -354.6666666667px #0fd,-236px -116.6666666667px #ff005e,-12px -77.6666666667px #ff4000,243px -148.6666666667px #ffa600}}@-ms-keyframes bang{to{box-shadow:-202px -87.6666666667px #00ff4d,248px 65.3333333333px #0051ff,216px -344.6666666667px #ff0059,-85px 29.3333333333px #1e00ff,-178px -315.6666666667px #3700ff,-116px -25.6666666667px #6f0,149px -112.6666666667px #09ff00,-170px -240.6666666667px #00fff2,-67px -349.6666666667px #f700ff,-115px -30.6666666667px #3700ff,-162px -334.6666666667px #00ff15,-31px 75.3333333333px #a600ff,-120px -279.6666666667px #59ff00,249px -223.6666666667px #ff5100,-5px -227.6666666667px #ff00bf,-183px -71.6666666667px #ff009d,189px -114.6666666667px #0fb,-57px -341.6666666667px #e600ff,3px -88.6666666667px #ff00d0,192px -352.6666666667px #59ff00,34px -360.6666666667px #ff002b,105px -12.6666666667px #d0ff00,-73px -37.6666666667px #bfff00,28px -243.6666666667px #1a00ff,15px -256.6666666667px #ff0080,-55px -97.6666666667px #0f9,25px -406.6666666667px #d0f,-196px 79.3333333333px #00ff5e,-28px -312.6666666667px #2b00ff,-146px 70.3333333333px #0f9,110px -234.6666666667px #f30,161px 40.3333333333px #0f5,14px -.6666666667px #ff002f,-211px -53.6666666667px red,170px 6.3333333333px #0900ff,176px -201.6666666667px #2600ff,84px -331.6666666667px #02f,68px -154.6666666667px #008cff,-133px 62.3333333333px #00ff1e,2px 43.3333333333px #00f2ff,29px 65.3333333333px #0062ff,-229px 9.3333333333px #f60,-202px -390.6666666667px #00ffd9,237px -264.6666666667px #a2ff00,101px -78.6666666667px #8f0,243px -355.6666666667px #07f,166px 50.3333333333px #0fa,185px -354.6666666667px #0fd,-236px -116.6666666667px #ff005e,-12px -77.6666666667px #ff4000,243px -148.6666666667px #ffa600}}@keyframes bang{to{box-shadow:-202px -87.6666666667px #00ff4d,248px 65.3333333333px #0051ff,216px -344.6666666667px #ff0059,-85px 29.3333333333px #1e00ff,-178px -315.6666666667px #3700ff,-116px -25.6666666667px #6f0,149px -112.6666666667px #09ff00,-170px -240.6666666667px #00fff2,-67px -349.6666666667px #f700ff,-115px -30.6666666667px #3700ff,-162px -334.6666666667px #00ff15,-31px 75.3333333333px #a600ff,-120px -279.6666666667px #59ff00,249px -223.6666666667px #ff5100,-5px -227.6666666667px #ff00bf,-183px -71.6666666667px #ff009d,189px -114.6666666667px #0fb,-57px -341.6666666667px #e600ff,3px -88.6666666667px #ff00d0,192px -352.6666666667px #59ff00,34px -360.6666666667px #ff002b,105px -12.6666666667px #d0ff00,-73px -37.6666666667px #bfff00,28px -243.6666666667px #1a00ff,15px -256.6666666667px #ff0080,-55px -97.6666666667px #0f9,25px -406.6666666667px #d0f,-196px 79.3333333333px #00ff5e,-28px -312.6666666667px #2b00ff,-146px 70.3333333333px #0f9,110px -234.6666666667px #f30,161px 40.3333333333px #0f5,14px -.6666666667px #ff002f,-211px -53.6666666667px red,170px 6.3333333333px #0900ff,176px -201.6666666667px #2600ff,84px -331.6666666667px #02f,68px -154.6666666667px #008cff,-133px 62.3333333333px #00ff1e,2px 43.3333333333px #00f2ff,29px 65.3333333333px #0062ff,-229px 9.3333333333px #f60,-202px -390.6666666667px #00ffd9,237px -264.6666666667px #a2ff00,101px -78.6666666667px #8f0,243px -355.6666666667px #07f,166px 50.3333333333px #0fa,185px -354.6666666667px #0fd,-236px -116.6666666667px #ff005e,-12px -77.6666666667px #ff4000,243px -148.6666666667px #ffa600}}@-webkit-keyframes gravity{to{transform:translateY(200px);-moz-transform:translateY(200px);-webkit-transform:translateY(200px);-o-transform:translateY(200px);-ms-transform:translateY(200px);opacity:0}}@-moz-keyframes gravity{to{transform:translateY(200px);-moz-transform:translateY(200px);-webkit-transform:translateY(200px);-o-transform:translateY(200px);-ms-transform:translateY(200px);opacity:0}}@-o-keyframes gravity{to{transform:translateY(200px);-moz-transform:translateY(200px);-webkit-transform:translateY(200px);-o-transform:translateY(200px);-ms-transform:translateY(200px);opacity:0}}@-ms-keyframes gravity{to{transform:translateY(200px);-moz-transform:translateY(200px);-webkit-transform:translateY(200px);-o-transform:translateY(200px);-ms-transform:translateY(200px);opacity:0}}@keyframes gravity{to{transform:translateY(200px);-moz-transform:translateY(200px);-webkit-transform:translateY(200px);-o-transform:translateY(200px);-ms-transform:translateY(200px);opacity:0}}@-webkit-keyframes position{0%,19.9%{margin-top:10%;margin-left:40%}20%,39.9%{margin-top:40%;margin-left:30%}40%,59.9%{margin-top:20%;margin-left:70%}60%,79.9%{margin-top:30%;margin-left:20%}80%,99.9%{margin-top:30%;margin-left:80%}}@-moz-keyframes position{0%,19.9%{margin-top:10%;margin-left:40%}20%,39.9%{margin-top:40%;margin-left:30%}40%,59.9%{margin-top:20%;margin-left:70%}60%,79.9%{margin-top:30%;margin-left:20%}80%,99.9%{margin-top:30%;margin-left:80%}}@-o-keyframes position{0%,19.9%{margin-top:10%;margin-left:40%}20%,39.9%{margin-top:40%;margin-left:30%}40%,59.9%{margin-top:20%;margin-left:70%}60%,79.9%{margin-top:30%;margin-left:20%}80%,99.9%{margin-top:30%;margin-left:80%}}@-ms-keyframes position{0%,19.9%{margin-top:10%;margin-left:40%}20%,39.9%{margin-top:40%;margin-left:30%}40%,59.9%{margin-top:20%;margin-left:70%}60%,79.9%{margin-top:30%;margin-left:20%}80%,99.9%{margin-top:30%;margin-left:80%}}@keyframes position{0%,19.9%{margin-top:10%;margin-left:40%}20%,39.9%{margin-top:40%;margin-left:30%}40%,59.9%{margin-top:20%;margin-left:70%}60%,79.9%{margin-top:30%;margin-left:20%}80%,99.9%{margin-top:30%;margin-left:80%}}</style>').appendTo('head');
let shown = false;

export function firstOf2021(currentSingle) {
    if (!shown) {
        let now = new Date().getTime();
        let year2021 = new Date(2021, 0, 1, 0, 0, 0);
        if (!Boolean(kernel.getProp('firstSolve2021')) && now >= year2021) {
            shown = true;
            $(document).trigger('voice', ['FIRST_2021']);
            $('body').prepend('<div class="pyro"><div class="before"></div><div class="after"></div></div>');
            let title = 'Primeira solve de 2021!';
            let event = $('select').eq(1).find('option:selected').text();
            let content = '<p>Esta é a sua primeira solve do ano utilizando o csTimer+, parabéns!<br>Esperamos que você esteja gostando da extensão e desejamos um ano repleto de PBs e cubing!</p><br><div style="text-align: center"><h1 style="font-size: 120px; line-height: 80px;">' + currentSingle + '</h1><br>' + event + '</div><br><p>Compartilhe este momento no instagram, marcando <a href="https://instagram.com/melo.code" target="_blank">@melo.code</a></p><p>Irei repostar todos os seus tempos por lá, nos vemos em algum próximo update!</p><br><small style="text-align: right !important">Feliz 2021!<br>Mateus Melo, desenvolvedor do csTimer+</small>';
            if (kernel.getProp('lang') != 'pt-pt') {
                title = 'First solve of 2021!';
                content = '<p>This is your first solve of the year with csTimer+, congratulations!<br>We hope you\'re enjoying the extension so far and wish you a year with lots of PBs and cubing!</p><br><div style="text-align: center"><h1 style="font-size: 120px; line-height: 80px;">' + currentSingle + '</h1><br>' + event + '</div><br><p>Share this moment on instagram by tagging <a href="https://instagram.com/melo.code" target="_blank">@melo.code</a></p><p>I\'ll be reposting your solves there, see you in the next update!</p><br><small style="text-align: right !important">Happy 2021!<br>Mateus Melo, developer of csTimer+</small>';
            }
            setTimeout(function() {
                dialog('csTimer+',
                    '<div style="line-height: 26px;"><h4>' + title + '</h4>\n' +
                    '        <br>\n' + content +
                    '    </div>',
                    function () {
                        kernel.setProp('firstSolve2021', true);
                        setTimeout(function() {
                            $('.pyro').remove();
                        }, 1000);
                    }
                );
            }, 1000);
        }
    }
}